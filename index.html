<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Paina Nativa - Artesanatos Premium em Madeira</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <style>
        :root {
            --primary-dark: #1a120b;
            --secondary-dark: #2c1a0f;
            --accent: #8b5a2b;
            --accent-light: #a87c52;
            --accent-gold: #d4af37;
            --text-light: #f5f5f5;
            --text-muted: #cccccc;
            --danger: #c44536;
            --success: #27ae60;
            --warning: #f39c12;
            --border-radius: 12px;
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            width: 100%;
            position: relative;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--text-light);
            line-height: 1.7;
            overflow-x: hidden;
            width: 100%;
            position: relative;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
        }

        /* Header e Navegação */
        header {
            background: rgba(26, 18, 11, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.2rem 0;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--text-light);
            font-weight: bold;
            border: 2px solid var(--accent-gold);
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .logo:hover {
            transform: rotate(10deg) scale(1.05);
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.5);
        }

        .company-name {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--text-light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        nav a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.7rem 1.2rem;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
        }

        nav a:hover {
            background: rgba(139, 90, 43, 0.2);
            transform: translateY(-2px);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background: rgba(44, 26, 15, 0.95);
            backdrop-filter: blur(10px);
            min-width: 220px;
            box-shadow: var(--shadow);
            border-radius: var(--border-radius);
            z-index: 1;
            top: 100%;
            left: 0;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .dropdown-content a {
            display: block;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            transition: var(--transition);
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background: rgba(212, 175, 55, 0.1);
            padding-left: 2rem;
        }

        .user-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.7rem 1.8rem;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-family: 'Inter', sans-serif;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: var(--text-light);
            box-shadow: 0 4px 15px rgba(139, 90, 43, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 90, 43, 0.6);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--text-light);
        }

        .btn-outline:hover {
            background: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #e74c3c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #2ecc71 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #f1c40f 100%);
            color: white;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(26, 18, 11, 0.85), rgba(44, 26, 15, 0.85)), url('https://images.unsplash.com/photo-1586023492125-27b2c045efd7?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            padding: 12rem 0 8rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 0%, rgba(26, 18, 11, 0.7) 100%);
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 4rem;
            margin-bottom: 1.5rem;
            font-weight: 800;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            background: linear-gradient(135deg, var(--text-light) 0%, var(--accent-gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.3rem;
            margin: 0 auto 2.5rem;
            color: var(--text-muted);
            max-width: 600px;
            line-height: 1.8;
        }

        .hero-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Produtos */
        .section-title {
            text-align: center;
            margin: 5rem 0 3rem;
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            color: var(--text-light);
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--accent-gold));
            margin: 1rem auto;
            border-radius: 2px;
        }

        .categories-filter {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .category-btn {
            padding: 0.8rem 1.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 50px;
            color: var(--text-light);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .category-btn.active, .category-btn:hover {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.4);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2.5rem;
            margin-bottom: 5rem;
        }

        .product-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            overflow: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow-light);
            border: 1px solid rgba(212, 175, 55, 0.1);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(212, 175, 55, 0.3);
        }

        .product-image {
            height: 240px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-size: 1.8rem;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .product-image::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
        }

        .product-badges {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 2;
        }

        .discount-badge {
            background: linear-gradient(135deg, var(--danger) 0%, #e74c3c 100%);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(196, 69, 54, 0.4);
        }

        .new-badge {
            background: linear-gradient(135deg, var(--success) 0%, #2ecc71 100%);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(39, 174, 96, 0.4);
        }

        .product-info {
            padding: 1.8rem;
            position: relative;
            z-index: 2;
        }

        .product-title {
            font-size: 1.4rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
            color: var(--text-light);
        }

        .product-description {
            color: var(--text-muted);
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .current-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .original-price {
            text-decoration: line-through;
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .product-actions {
            display: flex;
            gap: 0.8rem;
        }

        .product-actions .btn {
            flex: 1;
            padding: 0.8rem;
            font-size: 0.9rem;
            justify-content: center;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1.5rem;
            justify-content: center;
        }

        .quantity-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(139, 90, 43, 0.3);
        }

        .quantity-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(139, 90, 43, 0.5);
        }

        .quantity-input {
            width: 60px;
            text-align: center;
            padding: 0.5rem;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.3);
            color: var(--text-light);
            border-radius: var(--border-radius);
            font-weight: 600;
        }

        /* Modal de Login/Cadastro */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            border-radius: var(--border-radius);
            width: 100%;
            max-width: 500px;
            padding: 2.5rem;
            position: relative;
            box-shadow: var(--shadow);
            border: 1px solid rgba(212, 175, 55, 0.2);
            animation: modalAppear 0.4s ease;
        }

        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.9) translateY(-20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .close-modal {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-muted);
            transition: var(--transition);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
            transform: rotate(90deg);
        }

        .modal-title {
            margin-bottom: 2rem;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            background: linear-gradient(135deg, var(--text-light) 0%, var(--accent-gold) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-group {
            margin-bottom: 1.8rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.7rem;
            font-weight: 500;
            color: var(--text-light);
        }

        .form-control {
            width: 100%;
            padding: 1rem 1.2rem;
            border-radius: var(--border-radius);
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(139, 90, 43, 0.3);
        }

        .form-switch {
            text-align: center;
            margin-top: 1.5rem;
        }

        .form-switch a {
            color: var(--accent-gold);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .form-switch a:hover {
            text-decoration: underline;
        }

        /* Chat IA */
        .chat-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .chat-button {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(139, 90, 43, 0.5);
            transition: var(--transition);
            position: relative;
        }

        .chat-button:hover {
            transform: scale(1.1) rotate(10deg);
            box-shadow: 0 12px 30px rgba(139, 90, 43, 0.7);
        }

        .chat-window {
            display: none;
            position: absolute;
            bottom: 90px;
            right: 0;
            width: 380px;
            height: 500px;
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            flex-direction: column;
            border: 1px solid rgba(212, 175, 55, 0.2);
            overflow: hidden;
            animation: chatAppear 0.3s ease;
        }

        @keyframes chatAppear {
            from { opacity: 0; transform: translateY(20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .chat-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chat-messages {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .message {
            padding: 1rem 1.2rem;
            border-radius: 18px;
            max-width: 85%;
            line-height: 1.5;
            position: relative;
            animation: messageAppear 0.3s ease;
        }

        @keyframes messageAppear {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background: rgba(139, 90, 43, 0.2);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .user-message {
            background: rgba(212, 175, 55, 0.2);
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            display: flex;
            padding: 1.2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            gap: 0.8rem;
        }

        .chat-input input {
            flex: 1;
            padding: 0.8rem 1.2rem;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
        }

        .chat-input input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .chat-input button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            color: white;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-input button:hover {
            transform: scale(1.1);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            padding: 3rem 2rem;
            border-radius: var(--border-radius);
            margin: 2rem 0;
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: var(--shadow);
        }

        .admin-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .admin-tab {
            padding: 0.8rem 1.5rem;
            background: rgba(255,255,255,0.05);
            border: none;
            color: var(--text-light);
            cursor: pointer;
            border-radius: var(--border-radius);
            transition: var(--transition);
            font-weight: 500;
        }

        .admin-tab.active {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.4);
        }

        .admin-content {
            display: none;
        }

        .admin-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .admin-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.8rem;
        }

        .admin-form .form-group {
            margin-bottom: 1rem;
        }

        .admin-form .full-width {
            grid-column: 1 / -1;
        }

        .product-list, .customer-list, .order-list {
            display: grid;
            gap: 1.2rem;
        }

        .product-item, .customer-item, .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: rgba(255,255,255,0.05);
            border-radius: var(--border-radius);
            border: 1px solid rgba(255,255,255,0.1);
            transition: var(--transition);
        }

        .product-item:hover, .customer-item:hover, .order-item:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-3px);
        }

        .product-item-actions, .customer-item-actions, .order-item-actions {
            display: flex;
            gap: 0.8rem;
        }

        /* Footer */
        footer {
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            padding: 4rem 0 2rem;
            margin-top: 5rem;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .footer-section h3 {
            margin-bottom: 1.8rem;
            font-family: 'Playfair Display', serif;
            color: var(--text-light);
            font-size: 1.5rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 1rem;
        }

        .footer-section a {
            color: var(--text-muted);
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-section a:hover {
            color: var(--accent-gold);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            transition: var(--transition);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }

        .social-links a:hover {
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(139, 90, 43, 0.4);
        }

        .copyright {
            text-align: center;
            padding-top: 2.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .admin-access {
            text-align: center;
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* Carrinho */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 420px;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            z-index: 2000;
            box-shadow: -5px 0 30px rgba(0,0,0,0.5);
            flex-direction: column;
            border-left: 1px solid rgba(212, 175, 55, 0.2);
        }

        .cart-header {
            padding: 1.8rem;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-items {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            gap: 1.2rem;
            padding: 1.2rem 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .cart-item-image {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            border-radius: var(--border-radius);
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }

        .cart-item-price {
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .cart-item-actions {
            display: flex;
            gap: 0.8rem;
            align-items: center;
            margin-top: 0.5rem;
        }

        .cart-footer {
            padding: 1.8rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-gold);
        }

        /* Controle de Estoque */
        .stock-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .stock-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-low {
            background: var(--danger);
        }

        .stock-medium {
            background: var(--warning);
        }

        .stock-high {
            background: var(--success);
        }

        /* Vendedores */
        .seller-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }

        .seller-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .seller-info {
            flex: 1;
        }

        .seller-name {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }

        .seller-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Upload de Imagens */
        .upload-area {
            border: 2px dashed rgba(212, 175, 55, 0.3);
            border-radius: var(--border-radius);
            padding: 2rem;
            text-align: center;
            margin-bottom: 1rem;
            transition: var(--transition);
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--accent);
            background: rgba(139, 90, 43, 0.1);
        }

        .upload-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .upload-item {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .upload-item img, .upload-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Notificação */
        .notification {
            position: fixed;
            top: 100px;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: var(--success);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.4s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        /* Responsividade */
        @media (max-width: 1024px) {
            .hero h1 {
                font-size: 3.2rem;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1.5rem;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .hero {
                padding: 10rem 0 6rem;
                background-attachment: scroll;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .company-name {
                font-size: 1.8rem;
            }

            .chat-window {
                width: 320px;
                height: 450px;
            }

            .cart-modal {
                width: 100%;
            }

            .admin-form {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .chat-window {
                width: 300px;
                right: -10px;
            }
            
            .logo-container {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .company-name {
                font-size: 1.5rem;
            }
        }

        /* Animações extras */
        .fade-in {
            animation: fadeIn 1s ease;
        }

        .slide-in-left {
            animation: slideInLeft 0.8s ease;
        }

        .slide-in-right {
            animation: slideInRight 0.8s ease;
        }

        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent-gold);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container nav-container">
            <div class="logo-container">
                <div class="logo">PN</div>
                <h1 class="company-name">Paina Nativa</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#home" onclick="showSection('home')">HOME</a></li>
                    <li class="dropdown">
                        <a href="#produtos">PRODUTOS <i class="fas fa-chevron-down"></i></a>
                        <div class="dropdown-content" id="categories-dropdown">
                            <!-- Categorias serão carregadas dinamicamente -->
                        </div>
                    </li>
                    <li><a href="#sobre" onclick="showSection('sobre')">SOBRE</a></li>
                    <li><a href="#informacoes" onclick="showSection('informacoes')">INFORMAÇÕES</a></li>
                    <li><a href="#contatos" onclick="showSection('contatos')">CONTATOS</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <button class="btn btn-outline" id="login-btn">
                    <i class="fas fa-user"></i> Login
                </button>
                <button class="btn btn-primary" id="cart-btn">
                    <i class="fas fa-shopping-cart"></i> <span id="cart-count">0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home-section">
        <div class="container hero-content">
            <h1 class="fade-in" id="hero-title">Artesanatos em Madeira com Tradição</h1>
            <p class="fade-in" id="hero-description">Descubra a beleza e autenticidade dos produtos artesanais da Paina Nativa. Cada peça é única, feita com madeira de qualidade e muito cuidado.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="showSection('produtos')">
                    <i class="fas fa-gem"></i> Ver Produtos
                </button>
                <button class="btn btn-outline" onclick="showSection('sobre')">
                    <i class="fas fa-history"></i> Nossa História
                </button>
            </div>
        </div>
    </section>

    <!-- Produtos em Destaque -->
    <section class="container" id="produtos-section" style="display: none;">
        <h2 class="section-title">Nossos Produtos</h2>
        
        <div class="categories-filter" id="categories-filter">
            <!-- Filtros de categoria serão carregados dinamicamente -->
        </div>
        
        <div class="products-grid" id="products-grid">
            <!-- Produtos serão carregados dinamicamente -->
        </div>
    </section>

    <!-- Sobre -->
    <section class="container" id="sobre-section" style="display: none;">
        <h2 class="section-title">Sobre a Paina Nativa</h2>
        <div class="about-content" id="about-content" style="background: rgba(255,255,255,0.05); padding: 3rem; border-radius: var(--border-radius); border: 1px solid rgba(212,175,55,0.2);">
            <p>Fundada em 2010, a Paina Nativa nasceu do amor pela arte em madeira e da tradição do chimarrão. Nossa missão é criar peças únicas que unem funcionalidade e beleza, utilizando madeiras de reflorestamento e técnicas artesanais passadas de geração em geração.</p>
            <p>Cada produto é cuidadosamente elaborado por nossos artesãos, que dedicam horas de trabalho para garantir a qualidade e durabilidade de cada peça. Valorizamos a sustentabilidade e o respeito ao meio ambiente em todos os nossos processos.</p>
        </div>
    </section>

    <!-- Informações -->
    <section class="container" id="informacoes-section" style="display: none;">
        <h2 class="section-title">Informações</h2>
        <div class="info-content" id="info-content" style="background: rgba(255,255,255,0.05); padding: 3rem; border-radius: var(--border-radius); border: 1px solid rgba(212,175,55,0.2);">
            <h3>Política de Entrega</h3>
            <p>Entregamos para todo o Brasil. O prazo de entrega varia de acordo com a localidade:</p>
            <ul>
                <li>Capital: 3-5 dias úteis</li>
                <li>Interior: 5-10 dias úteis</li>
                <li>Outros estados: 7-15 dias úteis</li>
            </ul>
            
            <h3>Formas de Pagamento</h3>
            <p>Aceitamos cartão de crédito (até 12x), débito, PIX e boleto bancário.</p>
            
            <h3>Trocas e Devoluções</h3>
            <p>Você tem 7 dias para solicitar troca ou devolução do produto. Entre em contato conosco através dos nossos canais de atendimento.</p>
        </div>
    </section>

    <!-- Contatos -->
    <section class="container" id="contatos-section" style="display: none;">
        <h2 class="section-title">Contatos</h2>
        <div class="contacts-content" id="contacts-content" style="background: rgba(255,255,255,0.05); padding: 3rem; border-radius: var(--border-radius); border: 1px solid rgba(212,175,55,0.2);">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2.5rem;">
                <div>
                    <h3>Endereço</h3>
                    <p id="company-address">Rua das Madeiras, 123 - Centro<br>Cidade/Estado - CEP: 12345-678</p>
                </div>
                <div>
                    <h3>Telefone</h3>
                    <p id="company-phone">(47) 99999-9999</p>
                </div>
                <div>
                    <h3>E-mail</h3>
                    <p id="company-email">contato@painanativa.com.br</p>
                </div>
                <div>
                    <h3>Horário de Atendimento</h3>
                    <p>Segunda a Sexta: 8h às 18h<br>Sábado: 8h às 12h</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal de Login/Cadastro -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('login-modal')">&times;</span>
            <h2 class="modal-title">Login</h2>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-phone">Telefone</label>
                    <input type="tel" id="login-phone" class="form-control" placeholder="(00) 00000-0000" required>
                </div>
                <div class="form-group">
                    <label for="login-password">Senha</label>
                    <input type="password" id="login-password" class="form-control" placeholder="Sua senha" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Entrar</button>
                <div class="form-switch">
                    <p>Não tem uma conta? <a href="#" id="switch-to-register">Cadastre-se</a></p>
                </div>
            </form>

            <form id="register-form" style="display: none;">
                <div class="form-group">
                    <label for="register-name">Nome Completo</label>
                    <input type="text" id="register-name" class="form-control" placeholder="Seu nome completo" required>
                </div>
                <div class="form-group">
                    <label for="register-phone">Telefone</label>
                    <input type="tel" id="register-phone" class="form-control" placeholder="(00) 00000-0000" required>
                </div>
                <div class="form-group">
                    <label for="register-birthdate">Data de Nascimento</label>
                    <input type="date" id="register-birthdate" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="register-address">Endereço Completo</label>
                    <textarea id="register-address" class="form-control" rows="3" placeholder="Digite seu endereço completo para entrega" required></textarea>
                </div>
                <div class="form-group">
                    <label for="register-password">Senha</label>
                    <input type="password" id="register-password" class="form-control" placeholder="Crie uma senha" required>
                </div>
                <div class="form-group">
                    <label for="register-confirm-password">Confirmar Senha</label>
                    <input type="password" id="register-confirm-password" class="form-control" placeholder="Confirme sua senha" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Cadastrar</button>
                <div class="form-switch">
                    <p>Já tem uma conta? <a href="#" id="switch-to-login">Faça login</a></p>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal" id="admin-login-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('admin-login-modal')">&times;</span>
            <h2 class="modal-title">Acesso Administrativo</h2>
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-username">Usuário</label>
                    <input type="text" id="admin-username" class="form-control" placeholder="Digite o usuário" required>
                </div>
                <div class="form-group">
                    <label for="admin-password">Senha</label>
                    <input type="password" id="admin-password" class="form-control" placeholder="Digite a senha" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-lock"></i> Entrar
                </button>
            </form>
        </div>
    </div>

    <!-- Painel Administrativo -->
    <section class="container admin-panel" id="admin-panel">
        <h2 class="section-title">Painel Administrativo</h2>
        
        <div class="admin-tabs">
            <button class="admin-tab active" onclick="openAdminTab('site-config')">
                <i class="fas fa-cog"></i> Configurações
            </button>
            <button class="admin-tab" onclick="openAdminTab('products')">
                <i class="fas fa-box"></i> Produtos
            </button>
            <button class="admin-tab" onclick="openAdminTab('customers')">
                <i class="fas fa-users"></i> Clientes
            </button>
            <button class="admin-tab" onclick="openAdminTab('orders')">
                <i class="fas fa-shopping-bag"></i> Pedidos
            </button>
            <button class="admin-tab" onclick="openAdminTab('sellers')">
                <i class="fas fa-user-tie"></i> Vendedores
            </button>
            <button class="admin-tab" onclick="openAdminTab('reports')">
                <i class="fas fa-chart-bar"></i> Relatórios
            </button>
            <button class="admin-tab" onclick="openAdminTab('messages')">
                <i class="fas fa-envelope"></i> Mensagens
            </button>
            <button class="admin-tab" onclick="openAdminTab('ai-config')">
                <i class="fas fa-robot"></i> IA Assistente
            </button>
        </div>
        
        <!-- Configurações do Site -->
        <div class="admin-content active" id="site-config">
            <h3>Configurações do Site</h3>
            <form id="site-config-form" class="admin-form">
                <div class="form-group">
                    <label for="site-logo">Logo da Empresa (URL)</label>
                    <input type="text" id="site-logo" class="form-control" placeholder="URL da imagem da logo">
                    <small>Recomendado: Use o Cloudinary para hospedar imagens</small>
                </div>
                <div class="form-group">
                    <label for="site-title">Título do Site</label>
                    <input type="text" id="site-title" class="form-control" placeholder="Título do site">
                </div>
                <div class="form-group full-width">
                    <label for="hero-title">Título da Página Principal</label>
                    <input type="text" id="admin-hero-title" class="form-control" placeholder="Título da página principal">
                </div>
                <div class="form-group full-width">
                    <label for="hero-description">Descrição da Página Principal</label>
                    <textarea id="admin-hero-description" class="form-control" rows="3" placeholder="Descrição da página principal"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="about-content">Conteúdo Sobre a Empresa</label>
                    <textarea id="admin-about-content" class="form-control" rows="5" placeholder="Conteúdo sobre a empresa"></textarea>
                </div>
                <div class="form-group">
                    <label for="company-address">Endereço</label>
                    <input type="text" id="admin-company-address" class="form-control" placeholder="Endereço da empresa">
                </div>
                <div class="form-group">
                    <label for="company-phone">Telefone</label>
                    <input type="text" id="admin-company-phone" class="form-control" placeholder="Telefone da empresa">
                </div>
                <div class="form-group">
                    <label for="company-email">E-mail</label>
                    <input type="email" id="admin-company-email" class="form-control" placeholder="E-mail da empresa">
                </div>
                <div class="form-group full-width">
                    <label for="whatsapp-number">Número do WhatsApp para Pedidos</label>
                    <input type="text" id="admin-whatsapp-number" class="form-control" placeholder="Número do WhatsApp com DDD">
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar Configurações
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Gerenciar Produtos -->
        <div class="admin-content" id="products">
            <h3>Gerenciar Produtos</h3>
            <button class="btn btn-primary" onclick="openProductModal()">
                <i class="fas fa-plus"></i> Adicionar Novo Produto
            </button>
            
            <div class="product-list" id="admin-product-list">
                <!-- Lista de produtos será carregada aqui -->
            </div>
        </div>
        
        <!-- Clientes -->
        <div class="admin-content" id="customers">
            <h3>Clientes Cadastrados</h3>
            <div class="filters" style="margin-bottom: 1.5rem;">
                <button class="btn btn-outline" onclick="filterCustomers('all')">Todos</button>
                <button class="btn btn-outline" onclick="filterCustomers('birthday')">Aniversariantes</button>
                <button class="btn btn-outline" onclick="filterCustomers('high-value')">Clientes VIP</button>
            </div>
            <div class="customer-list" id="admin-customer-list">
                <!-- Lista de clientes será carregada aqui -->
            </div>
            <div class="bulk-actions" style="margin-top: 2rem;">
                <h4>Mensagens em Massa</h4>
                <textarea id="bulk-message" class="form-control" rows="3" placeholder="Digite a mensagem para enviar em massa"></textarea>
                <button class="btn btn-warning" onclick="sendBulkMessage()" style="margin-top: 1rem;">
                    <i class="fas fa-paper-plane"></i> Enviar para Clientes Filtrados
                </button>
            </div>
        </div>
        
        <!-- Pedidos -->
        <div class="admin-content" id="orders">
            <h3>Pedidos Realizados</h3>
            <div class="order-list" id="admin-order-list">
                <!-- Lista de pedidos será carregada aqui -->
            </div>
        </div>
        
        <!-- Vendedores -->
        <div class="admin-content" id="sellers">
            <h3>Gerenciar Vendedores</h3>
            <button class="btn btn-primary" onclick="openSellerModal()">
                <i class="fas fa-plus"></i> Adicionar Vendedor
            </button>
            
            <div class="seller-list" id="admin-seller-list">
                <!-- Lista de vendedores será carregada aqui -->
            </div>
        </div>
        
        <!-- Relatórios -->
        <div class="admin-content" id="reports">
            <h3>Relatórios e Estatísticas</h3>
            <div class="reports-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                <div class="report-card">
                    <div class="report-header">
                        <h4>Vendas do Mês</h4>
                        <span class="report-value" id="monthly-sales">R$ 0,00</span>
                    </div>
                </div>
                
                <div class="report-card">
                    <div class="report-header">
                        <h4>Produtos Mais Vendidos</h4>
                    </div>
                    <div id="top-products">
                        <!-- Produtos mais vendidos serão carregados aqui -->
                    </div>
                </div>
                
                <div class="report-card">
                    <div class="report-header">
                        <h4>Estoque Baixo</h4>
                    </div>
                    <div id="low-stock">
                        <!-- Produtos com estoque baixo serão carregados aqui -->
                    </div>
                </div>
                
                <div class="report-card">
                    <div class="report-header">
                        <h4>Clientes Novos</h4>
                        <span class="report-value" id="new-customers">0</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mensagens -->
        <div class="admin-content" id="messages">
            <h3>Configurações de Mensagens</h3>
            <form id="messages-config-form" class="admin-form">
                <div class="form-group full-width">
                    <label for="birthday-message">Mensagem de Aniversário</label>
                    <textarea id="birthday-message" class="form-control" rows="3" placeholder="Mensagem automática para aniversariantes"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="promotion-message">Mensagem de Promoção</label>
                    <textarea id="promotion-message" class="form-control" rows="3" placeholder="Mensagem para promoções"></textarea>
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary">Salvar Mensagens</button>
                </div>
            </form>
        </div>
        
        <!-- Configuração da IA -->
        <div class="admin-content" id="ai-config">
            <h3>Configuração do Assistente IA</h3>
            <form id="ai-config-form" class="admin-form">
                <div class="form-group full-width">
                    <label for="ai-welcome">Mensagem de Boas-Vindas</label>
                    <textarea id="ai-welcome" class="form-control" rows="2" placeholder="Mensagem inicial do assistente"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="ai-products">Resposta sobre Produtos</label>
                    <textarea id="ai-products" class="form-control" rows="3" placeholder="Como o assistente deve falar sobre produtos"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="ai-prices">Resposta sobre Preços</label>
                    <textarea id="ai-prices" class="form-control" rows="3" placeholder="Como o assistente deve falar sobre preços"></textarea>
                </div>
                <div class="form-group full-width">
                    <label for="ai-contacts">Resposta sobre Contatos</label>
                    <textarea id="ai-contacts" class="form-control" rows="3" placeholder="Como o assistente deve falar sobre contatos"></textarea>
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary">Salvar Configurações da IA</button>
                </div>
            </form>
        </div>
    </section>

    <!-- Modal de Produto (Admin) -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('product-modal')">&times;</span>
            <h2 class="modal-title" id="product-modal-title">Adicionar Produto</h2>
            <form id="product-form" class="admin-form">
                <input type="hidden" id="product-id">
                <div class="form-group">
                    <label for="product-name">Nome do Produto</label>
                    <input type="text" id="product-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="product-description">Descrição</label>
                    <textarea id="product-description" class="form-control" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="product-category">Categoria</label>
                    <select id="product-category" class="form-control" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="porta-ervas">Porta Ervas</option>
                        <option value="cuias">Cuias</option>
                        <option value="bombas">Bombas</option>
                        <option value="suporte-cuias">Suporte de Cuias</option>
                        <option value="ervas">Ervas</option>
                        <option value="chaveiros">Chaveiros</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="product-price">Preço (R$)</label>
                    <input type="number" id="product-price" class="form-control" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="product-discount">Desconto (%)</label>
                    <input type="number" id="product-discount" class="form-control" min="0" max="100" value="0">
                </div>
                <div class="form-group">
                    <label for="product-stock">Estoque</label>
                    <input type="number" id="product-stock" class="form-control" min="0" value="0" required>
                </div>
                <div class="form-group">
                    <label for="product-min-stock">Estoque Mínimo</label>
                    <input type="number" id="product-min-stock" class="form-control" min="0" value="5" required>
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar Produto
                    </button>
                    <button type="button" class="btn btn-outline" onclick="closeModal('product-modal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Vendedor -->
    <div class="modal" id="seller-modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('seller-modal')">&times;</span>
            <h2 class="modal-title" id="seller-modal-title">Adicionar Vendedor</h2>
            <form id="seller-form" class="admin-form">
                <input type="hidden" id="seller-id">
                <div class="form-group">
                    <label for="seller-name">Nome do Vendedor</label>
                    <input type="text" id="seller-name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="seller-email">E-mail</label>
                    <input type="email" id="seller-email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="seller-phone">Telefone</label>
                    <input type="tel" id="seller-phone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="seller-commission">Comissão (%)</label>
                    <input type="number" id="seller-commission" class="form-control" min="0" max="100" step="0.1" value="10" required>
                </div>
                <div class="form-group full-width">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar Vendedor
                    </button>
                    <button type="button" class="btn btn-outline" onclick="closeModal('seller-modal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Chat IA -->
    <div class="chat-container">
        <div class="chat-button" id="chat-toggle">
            <i class="fas fa-robot"></i>
        </div>
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                <h3><i class="fas fa-robot"></i> Assistente Paina Nativa</h3>
                <span id="close-chat"><i class="fas fa-times"></i></span>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    Olá! Sou o assistente virtual da Paina Nativa. Como posso ajudá-lo hoje?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
                <button id="send-message"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <!-- Carrinho -->
    <div class="cart-modal" id="cart-modal">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-cart"></i> Seu Carrinho</h3>
            <span id="close-cart"><i class="fas fa-times"></i></span>
        </div>
        <div class="cart-items" id="cart-items">
            <!-- Itens do carrinho serão carregados aqui -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total">R$ 0,00</span>
            </div>
            <button class="btn btn-primary" style="width: 100%;" id="checkout-btn">
                <i class="fas fa-check"></i> Finalizar Pedido
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Paina Nativa</h3>
                    <p>Artesanatos em madeira com tradição e qualidade. Cada peça é única e feita com muito cuidado.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Links Rápidos</h3>
                    <ul>
                        <li><a href="#home" onclick="showSection('home')"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#produtos" onclick="showSection('produtos')"><i class="fas fa-gem"></i> Produtos</a></li>
                        <li><a href="#sobre" onclick="showSection('sobre')"><i class="fas fa-history"></i> Sobre</a></li>
                        <li><a href="#informacoes" onclick="showSection('informacoes')"><i class="fas fa-info-circle"></i> Informações</a></li>
                        <li><a href="#contatos" onclick="showSection('contatos')"><i class="fas fa-phone"></i> Contatos</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contato</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-phone"></i> <span id="footer-phone">(00) 00000-0000</span></a></li>
                        <li><a href="#"><i class="fas fa-envelope"></i> <span id="footer-email">contato@painanativa.com</span></a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> <span id="footer-address">Endereço da empresa</span></a></li>
                    </ul>
                </div>
            </div>
            <div class="admin-access">
                <a href="#" onclick="openAdminLogin()" style="color: var(--accent-gold);">
                    <i class="fas fa-lock"></i> Acesso Administrativo
                </a>
            </div>
            <div class="copyright">
                &copy; 2023 Paina Nativa. Todos os direitos reservados.
            </div>
        </div>
    </footer>

    <!-- Notificação -->
    <div class="notification" id="notification"></div>

    <script>
        // ========== CONFIGURAÇÃO FIREBASE ==========
        
        // Suas configurações do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyCzOOvzl4RxmuMy7DLeXoKO2fovv2Yhh38",
            authDomain: "painanativa-82c89.firebaseapp.com",
            projectId: "painanativa-82c89",
            storageBucket: "painanativa-82c89.firebasestorage.app",
            messagingSenderId: "1041686332429",
            appId: "1:1041686332429:web:33fc9901dcea8bac3c4144"
        };

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // ========== CONFIGURAÇÃO INICIAL ==========
        
        // Dados iniciais (serão salvos no Firebase)
        let siteData = {
            logo: '',
            title: 'Paina Nativa',
            heroTitle: 'Artesanatos em Madeira com Tradição',
            heroDescription: 'Descubra a beleza e autenticidade dos produtos artesanais da Paina Nativa. Cada peça é única, feita com madeira de qualidade e muito cuidado.',
            aboutContent: 'Fundada em 2010, a Paina Nativa nasceu do amor pela arte em madeira e da tradição do chimarrão. Nossa missão é criar peças únicas que unem funcionalidade e beleza, utilizando madeiras de reflorestamento e técnicas artesanais passadas de geração em geração. Cada produto é cuidadosamente elaborado por nossos artesãos, que dedicam horas de trabalho para garantir a qualidade e durabilidade de cada peça. Valorizamos a sustentabilidade e o respeito ao meio ambiente em todos os nossos processos.',
            companyAddress: 'Rua das Madeiras, 123 - Centro<br>Cidade/Estado - CEP: 12345-678',
            companyPhone: '(47) 99999-9999',
            companyEmail: 'contato@painanativa.com.br',
            whatsappNumber: '5547999999999'
        };

        let products = [];
        let customers = [];
        let orders = [];
        let sellers = [];
        let currentUser = null;
        let cart = [];
        let aiConfig = {
            welcome: "Olá! Sou o assistente virtual da Paina Nativa. Como posso ajudá-lo hoje?",
            products: "Temos uma variedade de produtos artesanais em madeira, incluindo cuias, porta-ervas, bombas e muito mais. Posso ajudar com informações específicas sobre algum produto?",
            prices: "Nossos preços variam de acordo com o produto e acabamento. Todos os produtos têm preços competitivos e refletem a qualidade do trabalho artesanal.",
            contacts: "Você pode entrar em contato conosco pelo telefone (47) 99999-9999, email contato@painanativa.com.br ou através do nosso WhatsApp."
        };

        // Categorias de produtos
        const categories = [
            { id: 'all', name: 'Todos os Produtos' },
            { id: 'porta-ervas', name: 'Porta Ervas' },
            { id: 'cuias', name: 'Cuias' },
            { id: 'bombas', name: 'Bombas' },
            { id: 'suporte-cuias', name: 'Suporte de Cuias' },
            { id: 'ervas', name: 'Ervas' },
            { id: 'chaveiros', name: 'Chaveiros' },
            { id: 'outros', name: 'Outros' }
        ];

        // ========== INICIALIZAÇÃO ==========
        
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar dados do Firebase
            loadData();
            
            // Inicializar componentes
            initializeCategories();
            initializeEventListeners();
            updateCartCount();
            
            // Mostrar seção inicial
            showSection('home');
        });

        // ========== FUNÇÕES DE GERENCIAMENTO DE DADOS ==========
        
        async function loadData() {
            try {
                // Carregar dados do site
                const siteDoc = await db.collection('siteData').doc('config').get();
                if (siteDoc.exists) {
                    siteData = siteDoc.data();
                } else {
                    // Criar documento padrão se não existir
                    await db.collection('siteData').doc('config').set(siteData);
                }
                
                // Carregar produtos
                const productsSnapshot = await db.collection('products').get();
                products = [];
                productsSnapshot.forEach(doc => {
                    products.push({ id: doc.id, ...doc.data() });
                });
                
                // Carregar clientes
                const customersSnapshot = await db.collection('customers').get();
                customers = [];
                customersSnapshot.forEach(doc => {
                    customers.push({ id: doc.id, ...doc.data() });
                });
                
                // Carregar pedidos
                const ordersSnapshot = await db.collection('orders').get();
                orders = [];
                ordersSnapshot.forEach(doc => {
                    orders.push({ id: doc.id, ...doc.data() });
                });
                
                // Carregar vendedores
                const sellersSnapshot = await db.collection('sellers').get();
                sellers = [];
                sellersSnapshot.forEach(doc => {
                    sellers.push({ id: doc.id, ...doc.data() });
                });
                
                // Carregar configuração da IA
                const aiDoc = await db.collection('aiConfig').doc('assistant').get();
                if (aiDoc.exists) {
                    aiConfig = aiDoc.data();
                }
                
                // Atualizar interface com dados carregados
                updateSiteData();
                initializeProducts();
                
                showNotification('Dados carregados com sucesso!', 'success');
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                showNotification('Erro ao carregar dados. Usando dados locais.', 'error');
                
                // Usar dados locais em caso de erro
                updateSiteData();
                initializeProducts();
            }
        }

        async function saveData() {
            try {
                // Salvar dados no Firebase
                await db.collection('siteData').doc('config').set(siteData);
                await db.collection('aiConfig').doc('assistant').set(aiConfig);
                
                showNotification('Dados salvos com sucesso!', 'success');
            } catch (error) {
                console.error('Erro ao salvar dados:', error);
                showNotification('Erro ao salvar dados.', 'error');
            }
        }

        function updateSiteData() {
            // Atualizar elementos da página com os dados carregados
            document.getElementById('hero-title').textContent = siteData.heroTitle;
            document.getElementById('hero-description').textContent = siteData.heroDescription;
            document.getElementById('about-content').innerHTML = siteData.aboutContent;
            document.getElementById('company-address').innerHTML = siteData.companyAddress;
            document.getElementById('company-phone').textContent = siteData.companyPhone;
            document.getElementById('company-email').textContent = siteData.companyEmail;
            
            // Atualizar footer
            document.getElementById('footer-phone').textContent = siteData.companyPhone;
            document.getElementById('footer-email').textContent = siteData.companyEmail;
            document.getElementById('footer-address').innerHTML = siteData.companyAddress.replace('<br>', ', ');
            
            // Atualizar formulário admin
            document.getElementById('site-logo').value = siteData.logo || '';
            document.getElementById('site-title').value = siteData.title || '';
            document.getElementById('admin-hero-title').value = siteData.heroTitle || '';
            document.getElementById('admin-hero-description').value = siteData.heroDescription || '';
            document.getElementById('admin-about-content').value = siteData.aboutContent || '';
            document.getElementById('admin-company-address').value = siteData.companyAddress.replace('<br>', ', ') || '';
            document.getElementById('admin-company-phone').value = siteData.companyPhone || '';
            document.getElementById('admin-company-email').value = siteData.companyEmail || '';
            document.getElementById('admin-whatsapp-number').value = siteData.whatsappNumber || '';
            
            // Atualizar configuração da IA
            document.getElementById('ai-welcome').value = aiConfig.welcome || '';
            document.getElementById('ai-products').value = aiConfig.products || '';
            document.getElementById('ai-prices').value = aiConfig.prices || '';
            document.getElementById('ai-contacts').value = aiConfig.contacts || '';
        }

        // ========== FUNÇÕES DE NAVEGAÇÃO ==========
        
        function showSection(section) {
            // Esconder todas as seções
            document.getElementById('home-section').style.display = 'none';
            document.getElementById('produtos-section').style.display = 'none';
            document.getElementById('sobre-section').style.display = 'none';
            document.getElementById('informacoes-section').style.display = 'none';
            document.getElementById('contatos-section').style.display = 'none';
            document.getElementById('admin-panel').style.display = 'none';
            
            // Mostrar a seção solicitada
            if (section === 'home') {
                document.getElementById('home-section').style.display = 'block';
            } else if (section === 'produtos') {
                document.getElementById('produtos-section').style.display = 'block';
                initializeProducts();
            } else if (section === 'sobre') {
                document.getElementById('sobre-section').style.display = 'block';
            } else if (section === 'informacoes') {
                document.getElementById('informacoes-section').style.display = 'block';
            } else if (section === 'contatos') {
                document.getElementById('contatos-section').style.display = 'block';
            } else if (section === 'admin') {
                document.getElementById('admin-panel').style.display = 'block';
            }
        }

        // ========== FUNÇÕES DE PRODUTOS ==========
        
        function initializeCategories() {
            const dropdown = document.getElementById('categories-dropdown');
            const filter = document.getElementById('categories-filter');
            
            dropdown.innerHTML = '';
            filter.innerHTML = '';
            
            categories.forEach(category => {
                // Dropdown do menu
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = category.name;
                link.onclick = (e) => {
                    e.preventDefault();
                    filterProductsByCategory(category.id);
                };
                dropdown.appendChild(link);
                
                // Filtros na página de produtos
                const filterBtn = document.createElement('button');
                filterBtn.type = 'button';
                filterBtn.className = `category-btn ${category.id === 'all' ? 'active' : ''}`;
                filterBtn.textContent = category.name;
                filterBtn.onclick = () => {
                    // Remover classe active de todos os botões
                    document.querySelectorAll('.category-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    // Adicionar classe active ao botão clicado
                    filterBtn.classList.add('active');
                    // Filtrar produtos
                    filterProductsByCategory(category.id);
                };
                filter.appendChild(filterBtn);
            });
        }

        function initializeProducts() {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                        <i class="fas fa-box-open" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--text-muted);">Nenhum produto cadastrado</h3>
                        <p style="color: var(--text-muted);">Em breve teremos novidades!</p>
                    </div>
                `;
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                const discountBadge = product.discount > 0 
                    ? `<div class="discount-badge">-${product.discount}%</div>` 
                    : '';
                
                const newBadge = product.isNew ? `<div class="new-badge">Novo</div>` : '';
                
                const originalPrice = product.originalPrice > product.price 
                    ? `<span class="original-price">R$ ${product.originalPrice.toFixed(2)}</span>` 
                    : '';
                
                // Determinar status do estoque
                let stockBadge = '';
                if (product.stock <= 0) {
                    stockBadge = `<div class="stock-badge stock-low">Esgotado</div>`;
                } else if (product.stock <= product.minStock) {
                    stockBadge = `<div class="stock-badge stock-medium">Estoque Baixo</div>`;
                } else {
                    stockBadge = `<div class="stock-badge stock-high">Em Estoque</div>`;
                }
                
                productCard.innerHTML = `
                    <div class="product-image" style="${product.images && product.images.length > 0 ? `background-image: url(${product.images[0]})` : ''}">
                        ${!product.images || product.images.length === 0 ? `<i class="fas fa-gem"></i>` : ''}
                        <div class="product-badges">
                            ${discountBadge}
                            ${newBadge}
                            ${stockBadge}
                        </div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">
                            <span class="current-price">R$ ${product.price.toFixed(2)}</span>
                            ${originalPrice}
                        </div>
                        <div class="stock-info">
                            <span>Estoque: ${product.stock}</span>
                        </div>
                        <div class="quantity-selector">
                            <button type="button" class="quantity-btn" onclick="decreaseQuantity('${product.id}')">-</button>
                            <input type="number" class="quantity-input" id="quantity-${product.id}" value="1" min="1" max="${product.stock}">
                            <button type="button" class="quantity-btn" onclick="increaseQuantity('${product.id}')">+</button>
                        </div>
                        <div class="product-actions">
                            <button type="button" class="btn btn-outline add-to-cart" data-id="${product.id}" ${product.stock <= 0 ? 'disabled' : ''}>
                                <i class="fas fa-shopping-cart"></i> ${product.stock <= 0 ? 'Esgotado' : 'Carrinho'}
                            </button>
                            <button type="button" class="btn btn-primary view-details" data-id="${product.id}">
                                <i class="fas fa-info-circle"></i> Detalhes
                            </button>
                        </div>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Atualizar eventos dos botões
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-id');
                    const quantity = parseInt(document.getElementById(`quantity-${productId}`).value);
                    addToCart(productId, quantity);
                });
            });
            
            document.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-id');
                    showProductDetails(productId);
                });
            });
            
            // Atualizar lista de produtos no admin
            updateAdminProductList();
        }

        function filterProductsByCategory(categoryId) {
            const productsGrid = document.getElementById('products-grid');
            let filteredProducts = [];
            
            if (categoryId === 'all') {
                filteredProducts = products;
            } else {
                filteredProducts = products.filter(product => product.category === categoryId);
            }
            
            productsGrid.innerHTML = '';
            
            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                        <i class="fas fa-search" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--text-muted);">Nenhum produto encontrado</h3>
                        <p style="color: var(--text-muted);">Tente outra categoria ou volte mais tarde!</p>
                    </div>
                `;
                return;
            }
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                const discountBadge = product.discount > 0 
                    ? `<div class="discount-badge">-${product.discount}%</div>` 
                    : '';
                
                const newBadge = product.isNew ? `<div class="new-badge">Novo</div>` : '';
                
                const originalPrice = product.originalPrice > product.price 
                    ? `<span class="original-price">R$ ${product.originalPrice.toFixed(2)}</span>` 
                    : '';
                
                // Determinar status do estoque
                let stockBadge = '';
                if (product.stock <= 0) {
                    stockBadge = `<div class="stock-badge stock-low">Esgotado</div>`;
                } else if (product.stock <= product.minStock) {
                    stockBadge = `<div class="stock-badge stock-medium">Estoque Baixo</div>`;
                } else {
                    stockBadge = `<div class="stock-badge stock-high">Em Estoque</div>`;
                }
                
                productCard.innerHTML = `
                    <div class="product-image" style="${product.images && product.images.length > 0 ? `background-image: url(${product.images[0]})` : ''}">
                        ${!product.images || product.images.length === 0 ? `<i class="fas fa-gem"></i>` : ''}
                        <div class="product-badges">
                            ${discountBadge}
                            ${newBadge}
                            ${stockBadge}
                        </div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">
                            <span class="current-price">R$ ${product.price.toFixed(2)}</span>
                            ${originalPrice}
                        </div>
                        <div class="stock-info">
                            <span>Estoque: ${product.stock}</span>
                        </div>
                        <div class="quantity-selector">
                            <button type="button" class="quantity-btn" onclick="decreaseQuantity('${product.id}')">-</button>
                            <input type="number" class="quantity-input" id="quantity-${product.id}" value="1" min="1" max="${product.stock}">
                            <button type="button" class="quantity-btn" onclick="increaseQuantity('${product.id}')">+</button>
                        </div>
                        <div class="product-actions">
                            <button type="button" class="btn btn-outline add-to-cart" data-id="${product.id}" ${product.stock <= 0 ? 'disabled' : ''}>
                                <i class="fas fa-shopping-cart"></i> ${product.stock <= 0 ? 'Esgotado' : 'Carrinho'}
                            </button>
                            <button type="button" class="btn btn-primary view-details" data-id="${product.id}">
                                <i class="fas fa-info-circle"></i> Detalhes
                            </button>
                        </div>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Atualizar eventos dos botões
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-id');
                    const quantity = parseInt(document.getElementById(`quantity-${productId}`).value);
                    addToCart(productId, quantity);
                });
            });
            
            document.querySelectorAll('.view-details').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-id');
                    showProductDetails(productId);
                });
            });
        }

        function increaseQuantity(productId) {
            const input = document.getElementById(`quantity-${productId}`);
            const product = products.find(p => p.id === productId);
            if (parseInt(input.value) < product.stock) {
                input.value = parseInt(input.value) + 1;
            }
        }

        function decreaseQuantity(productId) {
            const input = document.getElementById(`quantity-${productId}`);
            if (parseInt(input.value) > 1) {
                input.value = parseInt(input.value) - 1;
            }
        }

        // ========== FUNÇÕES DO CARRINHO ==========
        
        function addToCart(productId, quantity = 1) {
            if (!currentUser) {
                showNotification('Por favor, faça login para adicionar produtos ao carrinho.', 'warning');
                document.getElementById('login-modal').style.display = 'flex';
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            if (product.stock < quantity) {
                showNotification(`Quantidade indisponível. Estoque atual: ${product.stock}`, 'warning');
                return;
            }
            
            const existingItem = cart.find(item => item.productId === productId);
            
            if (existingItem) {
                if (product.stock < existingItem.quantity + quantity) {
                    showNotification(`Quantidade indisponível. Estoque atual: ${product.stock}`, 'warning');
                    return;
                }
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    productId: productId,
                    quantity: quantity,
                    addedAt: new Date().toISOString()
                });
            }
            
            updateCartCount();
            saveCart();
            showNotification(`${quantity}x ${product.name} adicionado ao carrinho!`, 'success');
        }

        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = count;
        }

        function openCart() {
            document.getElementById('cart-modal').style.display = 'flex';
            updateCartDisplay();
        }

        function closeCart() {
            document.getElementById('cart-modal').style.display = 'none';
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div style="text-align: center; padding: 3rem;">
                        <i class="fas fa-shopping-cart" style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem;"></i>
                        <h3 style="color: var(--text-muted);">Seu carrinho está vazio</h3>
                        <p style="color: var(--text-muted);">Adicione alguns produtos!</p>
                    </div>
                `;
                document.getElementById('cart-total').textContent = 'R$ 0,00';
                return;
            }
            
            let total = 0;
            
            cart.forEach(item => {
                const product = products.find(p => p.id === item.productId);
                if (!product) return;
                
                const itemTotal = product.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image" style="${product.images && product.images.length > 0 ? `background-image: url(${product.images[0]})` : ''}">
                        ${!product.images || product.images.length === 0 ? `<i class="fas fa-gem"></i>` : ''}
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-title">${product.name}</div>
                        <div class="cart-item-price">R$ ${product.price.toFixed(2)} x ${item.quantity}</div>
                        <div class="cart-item-total">R$ ${itemTotal.toFixed(2)}</div>
                    </div>
                    <div class="cart-item-actions">
                        <button type="button" class="quantity-btn" onclick="decreaseCartQuantity('${product.id}')">-</button>
                        <span>${item.quantity}</span>
                        <button type="button" class="quantity-btn" onclick="increaseCartQuantity('${product.id}')">+</button>
                        <button type="button" class="btn btn-danger" onclick="removeFromCart('${product.id}')" style="margin-left: 0.5rem;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            document.getElementById('cart-total').textContent = `R$ ${total.toFixed(2)}`;
        }

        function increaseCartQuantity(productId) {
            const item = cart.find(item => item.productId === productId);
            const product = products.find(p => p.id === productId);
            
            if (item && product.stock > item.quantity) {
                item.quantity += 1;
                updateCartDisplay();
                updateCartCount();
                saveCart();
            } else {
                showNotification('Quantidade indisponível em estoque.', 'warning');
            }
        }

        function decreaseCartQuantity(productId) {
            const item = cart.find(item => item.productId === productId);
            if (item && item.quantity > 1) {
                item.quantity -= 1;
                updateCartDisplay();
                updateCartCount();
                saveCart();
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.productId !== productId);
            updateCartDisplay();
            updateCartCount();
            saveCart();
        }

        function saveCart() {
            if (currentUser) {
                localStorage.setItem(`cart_${currentUser.id}`, JSON.stringify(cart));
            }
        }

        function loadCart() {
            if (currentUser) {
                const savedCart = localStorage.getItem(`cart_${currentUser.id}`);
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                    updateCartCount();
                }
            }
        }

        function checkout() {
            if (cart.length === 0) {
                showNotification('Seu carrinho está vazio.', 'warning');
                return;
            }
            
            if (!currentUser) {
                showNotification('Por favor, faça login para finalizar o pedido.', 'warning');
                document.getElementById('login-modal').style.display = 'flex';
                return;
            }
            
            // Verificar estoque antes de finalizar
            for (const item of cart) {
                const product = products.find(p => p.id === item.productId);
                if (product.stock < item.quantity) {
                    showNotification(`Produto "${product.name}" não tem estoque suficiente. Estoque atual: ${product.stock}`, 'error');
                    return;
                }
            }
            
            // Criar pedido
            const orderId = 'ORD' + Date.now();
            const orderItems = cart.map(item => {
                const product = products.find(p => p.id === item.productId);
                return {
                    productId: item.productId,
                    productName: product.name,
                    quantity: item.quantity,
                    price: product.price
                };
            });
            
            const total = orderItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            const order = {
                id: orderId,
                customerId: currentUser.id,
                customerName: currentUser.name,
                customerPhone: currentUser.phone,
                customerAddress: currentUser.address,
                items: orderItems,
                total: total,
                status: 'pendente',
                createdAt: new Date().toISOString()
            };
            
            // Atualizar estoque
            updateStockAfterOrder(orderItems);
            
            // Salvar pedido no Firebase
            db.collection('orders').doc(orderId).set(order)
                .then(() => {
                    orders.push(order);
                    
                    // Atualizar dados do cliente
                    updateCustomerAfterOrder(currentUser.id, total);
                    
                    // Gerar mensagem para WhatsApp
                    let message = `*NOVO PEDIDO - Paina Nativa*%0A%0A`;
                    message += `*Cliente:* ${currentUser.name}%0A`;
                    message += `*Telefone:* ${currentUser.phone}%0A`;
                    message += `*Endereço:* ${currentUser.address}%0A%0A`;
                    message += `*Itens do Pedido:*%0A`;
                    
                    orderItems.forEach(item => {
                        message += `- ${item.productName} (${item.quantity}x) - R$ ${(item.price * item.quantity).toFixed(2)}%0A`;
                    });
                    
                    message += `%0A*Total: R$ ${total.toFixed(2)}*%0A%0A`;
                    message += `Pedido realizado em: ${new Date().toLocaleString('pt-BR')}`;
                    
                    // Limpar carrinho
                    cart = [];
                    updateCartCount();
                    updateCartDisplay();
                    closeCart();
                    
                    // Salvar dados
                    saveCart();
                    
                    // Abrir WhatsApp
                    const whatsappUrl = `https://wa.me/${siteData.whatsappNumber}?text=${message}`;
                    window.open(whatsappUrl, '_blank');
                    
                    showNotification('Pedido realizado com sucesso! Você será redirecionado para o WhatsApp.', 'success');
                })
                .catch(error => {
                    console.error('Erro ao salvar pedido:', error);
                    showNotification('Erro ao realizar pedido. Tente novamente.', 'error');
                });
        }

        function updateStockAfterOrder(orderItems) {
            orderItems.forEach(item => {
                const product = products.find(p => p.id === item.productId);
                if (product) {
                    const newStock = product.stock - item.quantity;
                    
                    // Atualizar no Firebase
                    db.collection('products').doc(product.id).update({
                        stock: newStock
                    });
                    
                    // Atualizar localmente
                    product.stock = newStock;
                }
            });
        }

        function updateCustomerAfterOrder(customerId, total) {
            const customer = customers.find(c => c.id === customerId);
            if (customer) {
                const newTotalSpent = (customer.totalSpent || 0) + total;
                const newOrdersCount = (customer.ordersCount || 0) + 1;
                
                // Atualizar no Firebase
                db.collection('customers').doc(customerId).update({
                    totalSpent: newTotalSpent,
                    ordersCount: newOrdersCount
                });
                
                // Atualizar localmente
                customer.totalSpent = newTotalSpent;
                customer.ordersCount = newOrdersCount;
            }
        }

        // ========== FUNÇÕES DE LOGIN/CADASTRO ==========
        
        function initializeEventListeners() {
            // Login/Cadastro
            document.getElementById('login-btn').addEventListener('click', () => {
                document.getElementById('login-modal').style.display = 'flex';
            });
            
            document.querySelectorAll('.close-modal').forEach(closeBtn => {
                closeBtn.addEventListener('click', (e) => {
                    e.target.closest('.modal').style.display = 'none';
                });
            });
            
            document.getElementById('switch-to-register').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'block';
            });
            
            document.getElementById('switch-to-login').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('register-form').style.display = 'none';
                document.getElementById('login-form').style.display = 'block';
            });
            
            document.getElementById('login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const phone = document.getElementById('login-phone').value;
                const password = document.getElementById('login-password').value;
                
                // Simular login (substituir por autenticação Firebase)
                const customer = customers.find(c => c.phone === phone && c.password === password);
                
                if (customer) {
                    currentUser = customer;
                    document.getElementById('login-modal').style.display = 'none';
                    document.getElementById('login-btn').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
                    loadCart();
                    showNotification(`Bem-vindo de volta, ${currentUser.name}!`, 'success');
                } else {
                    showNotification('Telefone ou senha incorretos.', 'error');
                }
            });
            
            document.getElementById('register-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('register-name').value;
                const phone = document.getElementById('register-phone').value;
                const birthdate = document.getElementById('register-birthdate').value;
                const address = document.getElementById('register-address').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('register-confirm-password').value;
                
                if (password !== confirmPassword) {
                    showNotification('As senhas não coincidem.', 'error');
                    return;
                }
                
                if (customers.find(c => c.phone === phone)) {
                    showNotification('Já existe uma conta com este telefone.', 'error');
                    return;
                }
                
                const customerId = 'CUST' + Date.now();
                
                const newCustomer = {
                    id: customerId,
                    name: name,
                    phone: phone,
                    birthdate: birthdate,
                    address: address,
                    password: password,
                    totalSpent: 0,
                    ordersCount: 0,
                    registeredAt: new Date().toISOString()
                };
                
                // Salvar cliente no Firebase
                db.collection('customers').doc(customerId).set(newCustomer)
                    .then(() => {
                        customers.push(newCustomer);
                        currentUser = newCustomer;
                        
                        document.getElementById('login-modal').style.display = 'none';
                        document.getElementById('login-btn').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
                        loadCart();
                        showNotification(`Cadastro realizado com sucesso, ${currentUser.name}!`, 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao cadastrar cliente:', error);
                        showNotification('Erro ao realizar cadastro. Tente novamente.', 'error');
                    });
            });
            
            // Carrinho
            document.getElementById('cart-btn').addEventListener('click', openCart);
            document.getElementById('close-cart').addEventListener('click', closeCart);
            document.getElementById('checkout-btn').addEventListener('click', checkout);
            
            // Chat
            document.getElementById('chat-toggle').addEventListener('click', () => {
                document.getElementById('chat-window').style.display = 'flex';
            });
            
            document.getElementById('close-chat').addEventListener('click', () => {
                document.getElementById('chat-window').style.display = 'none';
            });
            
            document.getElementById('send-message').addEventListener('click', sendChatMessage);
            document.getElementById('chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // Admin
            document.getElementById('site-config-form').addEventListener('submit', (e) => {
                e.preventDefault();
                saveSiteConfig();
            });
            
            document.getElementById('product-form').addEventListener('submit', (e) => {
                e.preventDefault();
                saveProduct();
            });
            
            document.getElementById('seller-form').addEventListener('submit', (e) => {
                e.preventDefault();
                saveSeller();
            });
            
            document.getElementById('ai-config-form').addEventListener('submit', (e) => {
                e.preventDefault();
                saveAIConfig();
            });
            
            document.getElementById('messages-config-form').addEventListener('submit', (e) => {
                e.preventDefault();
                saveMessagesConfig();
            });
            
            document.getElementById('admin-login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === 'Paina' && password === 'nativa') {
                    document.getElementById('admin-login-modal').style.display = 'none';
                    showSection('admin');
                    updateAdminPanels();
                    showNotification('Acesso administrativo concedido.', 'success');
                } else {
                    showNotification('Usuário ou senha incorretos.', 'error');
                }
            });
            
            // Fechar modais ao clicar fora
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
        }

        // ========== FUNÇÕES DO CHAT ==========
        
        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, true);
                input.value = '';
                
                // Resposta automática baseada na IA
                setTimeout(() => {
                    let response = '';
                    
                    if (message.toLowerCase().includes('produto') || message.toLowerCase().includes('cuia') || message.toLowerCase().includes('bomba')) {
                        response = aiConfig.products;
                    } else if (message.toLowerCase().includes('preço') || message.toLowerCase().includes('valor') || message.toLowerCase().includes('custa')) {
                        response = aiConfig.prices;
                    } else if (message.toLowerCase().includes('contato') || message.toLowerCase().includes('telefone') || message.toLowerCase().includes('email')) {
                        response = aiConfig.contacts;
                    } else {
                        response = "Entendi sua pergunta. Para informações específicas sobre produtos, preços ou contato, posso ajudar melhor. O que você gostaria de saber?";
                    }
                    
                    addMessage(response);
                }, 1000);
            }
        }

        function addMessage(text, isUser = false) {
            const messagesContainer = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // ========== FUNÇÕES ADMINISTRATIVAS ==========
        
        function openAdminLogin() {
            document.getElementById('admin-login-modal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function openAdminTab(tabName) {
            // Esconder todas as abas
            document.querySelectorAll('.admin-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remover classe active de todos os botões
            document.querySelectorAll('.admin-tab').forEach(button => {
                button.classList.remove('active');
            });
            
            // Mostrar a aba selecionada
            document.getElementById(tabName).classList.add('active');
            
            // Adicionar classe active ao botão clicado
            event.target.classList.add('active');
        }

        function saveSiteConfig() {
            siteData.logo = document.getElementById('site-logo').value;
            siteData.title = document.getElementById('site-title').value;
            siteData.heroTitle = document.getElementById('admin-hero-title').value;
            siteData.heroDescription = document.getElementById('admin-hero-description').value;
            siteData.aboutContent = document.getElementById('admin-about-content').value;
            siteData.companyAddress = document.getElementById('admin-company-address').value;
            siteData.companyPhone = document.getElementById('admin-company-phone').value;
            siteData.companyEmail = document.getElementById('admin-company-email').value;
            siteData.whatsappNumber = document.getElementById('admin-whatsapp-number').value;
            
            saveData();
            updateSiteData();
            showNotification('Configurações salvas com sucesso!', 'success');
        }

        function saveAIConfig() {
            aiConfig.welcome = document.getElementById('ai-welcome').value;
            aiConfig.products = document.getElementById('ai-products').value;
            aiConfig.prices = document.getElementById('ai-prices').value;
            aiConfig.contacts = document.getElementById('ai-contacts').value;
            
            saveData();
            showNotification('Configurações da IA salvas com sucesso!', 'success');
        }

        function saveMessagesConfig() {
            // Salvar configurações de mensagens
            showNotification('Configurações de mensagens salvas com sucesso!', 'success');
        }

        function openProductModal(productId = null) {
            const modal = document.getElementById('product-modal');
            const title = document.getElementById('product-modal-title');
            const form = document.getElementById('product-form');
            
            if (productId) {
                // Editar produto existente
                title.textContent = 'Editar Produto';
                const product = products.find(p => p.id === productId);
                
                document.getElementById('product-id').value = product.id;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-description').value = product.description;
                document.getElementById('product-category').value = product.category;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-discount').value = product.discount || 0;
                document.getElementById('product-stock').value = product.stock || 0;
                document.getElementById('product-min-stock').value = product.minStock || 5;
            } else {
                // Novo produto
                title.textContent = 'Adicionar Produto';
                form.reset();
                document.getElementById('product-id').value = '';
            }
            
            modal.style.display = 'flex';
        }

        async function saveProduct() {
            const productId = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const category = document.getElementById('product-category').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const discount = parseInt(document.getElementById('product-discount').value) || 0;
            const stock = parseInt(document.getElementById('product-stock').value) || 0;
            const minStock = parseInt(document.getElementById('product-min-stock').value) || 5;
            
            let originalPrice = price;
            if (discount > 0) {
                originalPrice = price / (1 - discount / 100);
            }
            
            const productData = {
                name,
                description,
                category,
                price,
                originalPrice,
                discount,
                stock,
                minStock,
                updatedAt: new Date().toISOString()
            };
            
            if (productId) {
                // Atualizar produto existente
                db.collection('products').doc(productId).update(productData)
                    .then(() => {
                        const index = products.findIndex(p => p.id === productId);
                        if (index !== -1) {
                            products[index] = { ...products[index], ...productData };
                        }
                        initializeProducts();
                        closeModal('product-modal');
                        showNotification('Produto atualizado com sucesso!', 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao atualizar produto:', error);
                        showNotification('Erro ao atualizar produto.', 'error');
                    });
            } else {
                // Adicionar novo produto
                productData.createdAt = new Date().toISOString();
                productData.isNew = true;
                
                db.collection('products').add(productData)
                    .then((docRef) => {
                        products.push({ id: docRef.id, ...productData });
                        initializeProducts();
                        closeModal('product-modal');
                        showNotification('Produto adicionado com sucesso!', 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao adicionar produto:', error);
                        showNotification('Erro ao adicionar produto.', 'error');
                    });
            }
        }

        function deleteProduct(productId) {
            if (confirm('Tem certeza que deseja excluir este produto?')) {
                db.collection('products').doc(productId).delete()
                    .then(() => {
                        products = products.filter(p => p.id !== productId);
                        initializeProducts();
                        showNotification('Produto excluído com sucesso!', 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao excluir produto:', error);
                        showNotification('Erro ao excluir produto.', 'error');
                    });
            }
        }

        function updateAdminProductList() {
            const productList = document.getElementById('admin-product-list');
            productList.innerHTML = '';
            
            if (products.length === 0) {
                productList.innerHTML = '<p>Nenhum produto cadastrado.</p>';
                return;
            }
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item';
                
                // Determinar status do estoque
                let stockStatus = '';
                if (product.stock <= 0) {
                    stockStatus = '<span style="color: var(--danger);">Esgotado</span>';
                } else if (product.stock <= product.minStock) {
                    stockStatus = `<span style="color: var(--warning);">Baixo (${product.stock})</span>`;
                } else {
                    stockStatus = `<span style="color: var(--success);">OK (${product.stock})</span>`;
                }
                
                productItem.innerHTML = `
                    <div>
                        <strong>${product.name}</strong> - R$ ${product.price.toFixed(2)}
                        ${product.discount > 0 ? ` (${product.discount}% off)` : ''}
                        <br>
                        <small>Categoria: ${categories.find(c => c.id === product.category)?.name || 'Outros'}</small>
                        <br>
                        <small>Estoque: ${stockStatus} | Mínimo: ${product.minStock}</small>
                    </div>
                    <div class="product-item-actions">
                        <button type="button" class="btn btn-outline" onclick="openProductModal('${product.id}')">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button type="button" class="btn btn-danger" onclick="deleteProduct('${product.id}')">
                            <i class="fas fa-trash"></i> Excluir
                        </button>
                    </div>
                `;
                
                productList.appendChild(productItem);
            });
        }

        function openSellerModal(sellerId = null) {
            const modal = document.getElementById('seller-modal');
            const title = document.getElementById('seller-modal-title');
            const form = document.getElementById('seller-form');
            
            if (sellerId) {
                // Editar vendedor existente
                title.textContent = 'Editar Vendedor';
                const seller = sellers.find(s => s.id === sellerId);
                
                document.getElementById('seller-id').value = seller.id;
                document.getElementById('seller-name').value = seller.name;
                document.getElementById('seller-email').value = seller.email;
                document.getElementById('seller-phone').value = seller.phone;
                document.getElementById('seller-commission').value = seller.commission || 10;
            } else {
                // Novo vendedor
                title.textContent = 'Adicionar Vendedor';
                form.reset();
                document.getElementById('seller-id').value = '';
            }
            
            modal.style.display = 'flex';
        }

        function saveSeller() {
            const sellerId = document.getElementById('seller-id').value;
            const name = document.getElementById('seller-name').value;
            const email = document.getElementById('seller-email').value;
            const phone = document.getElementById('seller-phone').value;
            const commission = parseFloat(document.getElementById('seller-commission').value);
            
            const sellerData = {
                name,
                email,
                phone,
                commission,
                totalSales: 0,
                updatedAt: new Date().toISOString()
            };
            
            if (sellerId) {
                // Atualizar vendedor existente
                db.collection('sellers').doc(sellerId).update(sellerData)
                    .then(() => {
                        const index = sellers.findIndex(s => s.id === sellerId);
                        if (index !== -1) {
                            sellers[index] = { ...sellers[index], ...sellerData };
                        }
                        updateAdminSellerList();
                        closeModal('seller-modal');
                        showNotification('Vendedor atualizado com sucesso!', 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao atualizar vendedor:', error);
                        showNotification('Erro ao atualizar vendedor.', 'error');
                    });
            } else {
                // Adicionar novo vendedor
                sellerData.createdAt = new Date().toISOString();
                sellerData.totalSales = 0;
                
                db.collection('sellers').add(sellerData)
                    .then((docRef) => {
                        sellers.push({ id: docRef.id, ...sellerData });
                        updateAdminSellerList();
                        closeModal('seller-modal');
                        showNotification('Vendedor adicionado com sucesso!', 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao adicionar vendedor:', error);
                        showNotification('Erro ao adicionar vendedor.', 'error');
                    });
            }
        }

        function updateAdminSellerList() {
            const sellerList = document.getElementById('admin-seller-list');
            sellerList.innerHTML = '';
            
            if (sellers.length === 0) {
                sellerList.innerHTML = '<p>Nenhum vendedor cadastrado.</p>';
                return;
            }
            
            sellers.forEach(seller => {
                const sellerItem = document.createElement('div');
                sellerItem.className = 'seller-card';
                sellerItem.innerHTML = `
                    <div class="seller-avatar">
                        ${seller.name.split(' ').map(n => n[0]).join('').toUpperCase()}
                    </div>
                    <div class="seller-info">
                        <div class="seller-name">${seller.name}</div>
                        <div class="seller-stats">
                            <span>Comissão: ${seller.commission}%</span>
                            <span>Vendas: R$ ${(seller.totalSales || 0).toFixed(2)}</span>
                        </div>
                    </div>
                    <div class="seller-item-actions">
                        <button type="button" class="btn btn-outline" onclick="openSellerModal('${seller.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                `;
                
                sellerList.appendChild(sellerItem);
            });
        }

        function filterCustomers(filterType) {
            const customerList = document.getElementById('admin-customer-list');
            customerList.innerHTML = '';
            
            let filteredCustomers = customers;
            
            if (filterType === 'birthday') {
                const today = new Date();
                filteredCustomers = customers.filter(customer => {
                    if (!customer.birthdate) return false;
                    const birthdate = new Date(customer.birthdate);
                    return birthdate.getMonth() === today.getMonth() && birthdate.getDate() === today.getDate();
                });
            } else if (filterType === 'high-value') {
                filteredCustomers = customers.filter(customer => customer.totalSpent > 200);
            }
            
            if (filteredCustomers.length === 0) {
                customerList.innerHTML = '<p>Nenhum cliente encontrado.</p>';
                return;
            }
            
            filteredCustomers.forEach(customer => {
                const customerItem = document.createElement('div');
                customerItem.className = 'customer-item';
                customerItem.innerHTML = `
                    <div>
                        <strong>${customer.name}</strong>
                        <br>
                        <small>Telefone: ${customer.phone}</small>
                        <br>
                        <small>Total Gasto: R$ ${customer.totalSpent?.toFixed(2) || '0,00'}</small>
                        <br>
                        <small>Pedidos: ${customer.ordersCount || 0}</small>
                        ${customer.birthdate ? `<br><small>Aniversário: ${new Date(customer.birthdate).toLocaleDateString('pt-BR')}</small>` : ''}
                    </div>
                `;
                
                customerList.appendChild(customerItem);
            });
        }

        function updateAdminCustomerList() {
            const customerList = document.getElementById('admin-customer-list');
            customerList.innerHTML = '';
            
            if (customers.length === 0) {
                customerList.innerHTML = '<p>Nenhum cliente cadastrado.</p>';
                return;
            }
            
            customers.forEach(customer => {
                const customerItem = document.createElement('div');
                customerItem.className = 'customer-item';
                customerItem.innerHTML = `
                    <div>
                        <strong>${customer.name}</strong>
                        <br>
                        <small>Telefone: ${customer.phone}</small>
                        <br>
                        <small>Total Gasto: R$ ${customer.totalSpent?.toFixed(2) || '0,00'}</small>
                        <br>
                        <small>Pedidos: ${customer.ordersCount || 0}</small>
                        ${customer.birthdate ? `<br><small>Aniversário: ${new Date(customer.birthdate).toLocaleDateString('pt-BR')}</small>` : ''}
                    </div>
                `;
                
                customerList.appendChild(customerItem);
            });
        }

        function updateAdminOrderList() {
            const orderList = document.getElementById('admin-order-list');
            orderList.innerHTML = '';
            
            if (orders.length === 0) {
                orderList.innerHTML = '<p>Nenhum pedido realizado.</p>';
                return;
            }
            
            orders.forEach(order => {
                const customer = customers.find(c => c.id === order.customerId);
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div>
                        <strong>Pedido #${order.id}</strong>
                        <br>
                        <small>Cliente: ${customer?.name || 'N/A'} (${customer?.phone || 'N/A'})</small>
                        <br>
                        <small>Data: ${new Date(order.createdAt).toLocaleDateString('pt-BR')}</small>
                        <br>
                        <small>Status: ${order.status}</small>
                        <br>
                        <small>Total: R$ ${order.total.toFixed(2)}</small>
                    </div>
                    <div class="order-item-actions">
                        <button type="button" class="btn btn-outline" onclick="viewOrderDetails('${order.id}')">
                            <i class="fas fa-eye"></i> Detalhes
                        </button>
                        <button type="button" class="btn btn-success" onclick="updateOrderStatus('${order.id}', 'concluido')">
                            <i class="fas fa-check"></i> Concluir
                        </button>
                    </div>
                `;
                
                orderList.appendChild(orderItem);
            });
        }

        function updateAdminPanels() {
            updateAdminProductList();
            updateAdminCustomerList();
            updateAdminOrderList();
            updateAdminSellerList();
            updateReports();
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            let details = `Pedido #${order.id}\n`;
            details += `Cliente: ${order.customerName} (${order.customerPhone})\n`;
            details += `Endereço: ${order.customerAddress}\n`;
            details += `Data: ${new Date(order.createdAt).toLocaleString('pt-BR')}\n`;
            details += `Status: ${order.status}\n\n`;
            details += `Itens:\n`;
            
            order.items.forEach(item => {
                details += `- ${item.productName} (${item.quantity}x) - R$ ${(item.price * item.quantity).toFixed(2)}\n`;
            });
            
            details += `\nTotal: R$ ${order.total.toFixed(2)}`;
            
            alert(details);
        }

        function updateOrderStatus(orderId, status) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = status;
                db.collection('orders').doc(orderId).update({ status: status })
                    .then(() => {
                        updateAdminOrderList();
                        showNotification(`Status do pedido #${orderId} atualizado para "${status}".`, 'success');
                    })
                    .catch(error => {
                        console.error('Erro ao atualizar status do pedido:', error);
                        showNotification('Erro ao atualizar status do pedido.', 'error');
                    });
            }
        }

        function updateReports() {
            // Vendas do mês
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlySales = orders
                .filter(order => {
                    const orderDate = new Date(order.createdAt);
                    return orderDate.getMonth() === currentMonth && orderDate.getFullYear() === currentYear;
                })
                .reduce((total, order) => total + order.total, 0);
            
            document.getElementById('monthly-sales').textContent = `R$ ${monthlySales.toFixed(2)}`;
            
            // Produtos mais vendidos
            const productSales = {};
            orders.forEach(order => {
                order.items.forEach(item => {
                    if (!productSales[item.productId]) {
                        productSales[item.productId] = {
                            name: item.productName,
                            quantity: 0,
                            revenue: 0
                        };
                    }
                    productSales[item.productId].quantity += item.quantity;
                    productSales[item.productId].revenue += item.price * item.quantity;
                });
            });
            
            const topProducts = Object.values(productSales)
                .sort((a, b) => b.quantity - a.quantity)
                .slice(0, 5);
            
            const topProductsContainer = document.getElementById('top-products');
            topProductsContainer.innerHTML = '';
            
            topProducts.forEach(product => {
                const productElement = document.createElement('div');
                productElement.style.padding = '0.5rem 0';
                productElement.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                productElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <span>${product.name}</span>
                        <span>${product.quantity} vendas</span>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--text-muted);">
                        R$ ${product.revenue.toFixed(2)}
                    </div>
                `;
                topProductsContainer.appendChild(productElement);
            });
            
            // Estoque baixo
            const lowStockProducts = products.filter(p => p.stock <= p.minStock);
            const lowStockContainer = document.getElementById('low-stock');
            lowStockContainer.innerHTML = '';
            
            lowStockProducts.forEach(product => {
                const productElement = document.createElement('div');
                productElement.style.padding = '0.5rem 0';
                productElement.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                productElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between;">
                        <span>${product.name}</span>
                        <span style="color: ${product.stock === 0 ? 'var(--danger)' : 'var(--warning)'};">${product.stock}</span>
                    </div>
                `;
                lowStockContainer.appendChild(productElement);
            });
            
            // Clientes novos (últimos 30 dias)
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const newCustomersCount = customers.filter(customer => {
                const registeredDate = new Date(customer.registeredAt);
                return registeredDate >= thirtyDaysAgo;
            }).length;
            
            document.getElementById('new-customers').textContent = newCustomersCount;
        }

        function sendBulkMessage() {
            const message = document.getElementById('bulk-message').value;
            if (!message) {
                showNotification('Digite uma mensagem para enviar.', 'warning');
                return;
            }
            
            // Simular envio de mensagem em massa
            // Em produção, integrar com API de WhatsApp
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            showNotification('Mensagem pronta para envio em massa!', 'success');
        }

        // ========== FUNÇÕES UTILITÁRIAS ==========
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Adicionar efeito de parallax no hero
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const hero = document.querySelector('.hero');
            if (hero) {
                hero.style.transform = `translateY(${scrolled * 0.5}px)`;
            }
            
            // Header sticky effect
            const header = document.querySelector('header');
            if (scrolled > 100) {
                header.style.background = 'rgba(26, 18, 11, 0.98)';
                header.style.padding = '0.8rem 0';
            } else {
                header.style.background = 'rgba(26, 18, 11, 0.95)';
                header.style.padding = '1.2rem 0';
            }
        });
    </script>
</body>
</html>